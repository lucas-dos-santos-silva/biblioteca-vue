import{D as A,K as V,M as C,N as p,O as w,I as S,c as d,a,t as b,q as r,k as _,x as l,P as f,G as x,L as N,o as h}from"./index-ZLna2JZK.js";const B={class:"p-4 max-w-4xl mx-auto w-full"},D={class:"text-2xl font-bold mb-6"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L={class:"col-span-1"},M=a("label",{for:"name",class:"block mb-2 text-sm font-medium"},[N("Nome "),a("span",{class:"sr-only"},"(Campo obrigatório)")],-1),O={key:0,class:"text-red-600 text-sm mt-1"},R={class:"col-span-1"},T=a("label",{for:"birthYear",class:"block mb-2 text-sm font-medium"},[N("Ano de Nascimento "),a("span",{class:"sr-only"},"(Campo obrigatório)")],-1),U={key:0,class:"text-red-600 text-sm mt-1"},j={class:"col-span-1 md:col-span-2 flex gap-4 mt-4"},G={__name:"AuthorsForm",setup(q){const Y=V(),i=S(),n=A(),u=Y.params.id,v=C(),c=u==="novo",e=p({name:"",birthYear:""}),s=p({});w(()=>{if(!c){const t=n.getAuthor(u);if(!t){i.push({name:"authors.index"});return}e.value={name:t.name,birthYear:t.birthYear}}});const g=()=>(s.value={},(!e.value.name||!e.value.name.trim())&&(s.value.name="Nome é obrigatório"),(!e.value.birthYear||isNaN(Number(e.value.birthYear)))&&(s.value.birthYear="Ano de nascimento válido é obrigatório"),Object.keys(s.value).length===0),y=()=>{g()&&(c?(n.addAuthor({name:e.value.name,birthYear:Number(e.value.birthYear)}),v.add({severity:"success",summary:"Sucesso",detail:"Autor criado com sucesso!",life:3e3})):(n.updateAuthor(u,{name:e.value.name,birthYear:Number(e.value.birthYear)}),v.add({severity:"success",summary:"Sucesso",detail:"Autor editado com sucesso!",life:3e3})),i.push({name:"authors.index"}))},k=()=>i.push({name:"authors.index"});return(t,o)=>(h(),d("div",B,[a("h1",D,b(c?"Novo Autor":"Editar Autor"),1),a("div",E,[a("div",L,[M,r(l(f),{id:"name",modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=m=>e.value.name=m),placeholder:"Digite o nome do autor",class:"w-full","aria-label":"Nome do autor"},null,8,["modelValue"]),s.value.name?(h(),d("div",O,b(s.value.name),1)):_("",!0)]),a("div",R,[T,r(l(f),{id:"birthYear",modelValue:e.value.birthYear,"onUpdate:modelValue":o[1]||(o[1]=m=>e.value.birthYear=m),placeholder:"Ex: 1970",class:"w-full","aria-label":"Ano de nascimento do autor"},null,8,["modelValue"]),s.value.birthYear?(h(),d("div",U,b(s.value.birthYear),1)):_("",!0)]),a("div",j,[r(l(x),{label:"Salvar",icon:"pi pi-check",severity:"success",onClick:y}),r(l(x),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:k})])])]))}};export{G as default};
